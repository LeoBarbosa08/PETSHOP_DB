CREATE DATABASE PETSHOP
GO


USE PETSHOP
GO









--CRIANDO TABELAS



--TABELA CLIENTE

CREATE TABLE CLIENTE(

IDCLIENTE INT NOT NULL IDENTITY,
NOME VARCHAR (30) NOT NULL,
CPF VARCHAR(11) NOT NULL UNIQUE ,
EMAIL VARCHAR(50) NOT NULL,
NASCIMENTO DATE NOT NULL,
SEXO CHAR(1),

)
GO



--CONSTRAINTS DE CLIENTE - PK

ALTER TABLE CLIENTE
ADD CONSTRAINT PK_IDCLIENTE
PRIMARY KEY (IDCLIENTE)
GO




-- TABELA PET

CREATE TABLE PET (

IDPET INT NOT NULL IDENTITY,
ESPECIE VARCHAR(30) NOT NULL,
GENERO VARCHAR(30) NOT NULL,
RACA VARCHAR(40) NOT NULL,
IDADE INT NOT NULL,
PESO NUMERIC(10,2) NOT NULL,
ID_DONO INT




)
GO

-- CRIANDO AS CONSTRAINTS - PK

ALTER TABLE PET 
ADD CONSTRAINT PK_IDPET
PRIMARY KEY (IDPET) 
GO


--FK

ALTER TABLE PET 
ADD CONSTRAINT FK_DONO
FOREIGN KEY (ID_DONO)
REFERENCES CLIENTE (IDCLIENTE) 
GO


--TABELA PRODUTO

CREATE TABLE PRODUTOS(

IDPRODUTO INT NOT NULL IDENTITY,
NOME VARCHAR(30) NOT NULL,
DESCRICAO VARCHAR(40) NOT NULL,
PRECO MONEY NOT NULL,
ESTOQUE INT NOT NULL



)
GO

--CONSTRAINTS PRODUTOS

ALTER TABLE PRODUTOS
ADD CONSTRAINT PK_PRODUTO
PRIMARY KEY (IDPRODUTO)
GO



--TABELA CONTRATO

CREATE TABLE CONTRATO(

IDCONTRATO INT NOT NULL IDENTITY,
ID_CLIENTE INT NOT NULL,
ID_PET INT NOT NULL,
DATAA_EMISSAO DATE NOT NULL




)

GO

--CONSTRAINTS

ALTER TABLE CONTRATO
ADD CONSTRAINT PK_CONTRATO
PRIMARY KEY (IDCONTRATO)
GO


ALTER TABLE CONTRATO
ADD CONSTRAINT FK_CLIENTE
FOREIGN KEY (ID_CLIENTE)
REFERENCES CLIENTE (IDCLIENTE) 
GO


ALTER TABLE CONTRATO 
ADD CONSTRAINT FK_PET
FOREIGN KEY (ID_PET)
REFERENCES PET (IDPET) 
GO



SP_HELP CONTRATO



CREATE TABLE VENDAS (

IDVENDA INT NOT NULL IDENTITY,
ID_CLIENTE INT NOT NULL,
ID_PRODUTO INT NOT NULL,
DATAA_VENDA DATE NOT NULL,
TOTAL MONEY


)
GO


--CONSTRAINTS 

ALTER TABLE VENDAS
ADD CONSTRAINT PK_VENDA
PRIMARY KEY (IDVENDA) 
GO

ALTER TABLE VENDAS
ADD CONSTRAINT FK_V_CLIENTE
FOREIGN KEY (ID_CLIENTE)
REFERENCES CLIENTE (IDCLIENTE)
GO


ALTER TABLE VENDAS
ADD CONSTRAINT FK_PRODUTO
FOREIGN KEY (ID_PRODUTO)
REFERENCES PRODUTOS(IDPRODUTO) 
GO



